<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='styles.css'>

</head>
<body>
<title>PSI Coding test</title>
<div class="centoot">
<h1 id="title">Coding PSI test</h1>

<button id="practice"  onclick="reorderItems()" >Start </button>
</div>
<div class="center">
<img class="invisible" id="answer" src="/key1.png">
<h1 class="invisible real" id="2ndtit"  >Practice test</h1>
<h2 id="workpls" class="invisible fuck" >Fill in the remaining ones!</h2>
<script>

   function removeInvis() {
    const inputs = document.querySelectorAll('.input');
    const array  = document.getElementById('array')
    const totle = document.getElementById('2ndtit')
    const title = document.getElementById('title')
    const divs = document.querySelectorAll('.fuck')
        const btn = document.getElementById('practice');
        const imgElement = document.getElementById("answer");
        const items = document.querySelectorAll('img.invisible');
        
        imgElement.classList.remove("invisible");
        imgElement.classList.add("visible");

        items.forEach(item => {
            item.classList.remove('invisible');
            
        });
        inputs.forEach(input => {
            input.classList.remove('invisible');
        });
        divs.forEach(div =>{
            div.classList.remove('invisible');
            div.classList.add('boxes');
        })
        array.classList.remove('invisible')
        array.classList.add('itemlist')
        totle.classList.remove('invisible')
        title.classList.add('invisible');
        btn.classList.add('invisible');
    }

    document.getElementById("practice").addEventListener("click", removeInvis);
    </script>
    
<div class="invisible" id="array">
    <div class="invisible fuck" id="it1">
        <img class="item 1 invisible" src="/1_1.png">
        <input class="invisible input" id="ans1" type="text">
    </div>
    <div class="invisible fuck" id="it2">
        <img class="item 2 invisible" src="/2_1.png">
        <input class="invisible input" id="ans2" type="text">
    </div>
    <div class="invisible fuck" id="it3">
        <img class="item 3 invisible" src="/3_1.png">
        <input class="invisible input" id="ans3" type="text">
    </div>
    <div class="invisible fuck" id="it4">
        <img class="item 4 invisible" src="/4_1.png">
        <input class="invisible input" id="ans4"  type="text">
    </div>
    <div class="invisible fuck" id="it5">
        <img class="item 5 invisible" src="/5_1.png">
        <input class="invisible input" id="ans5" type="text">
    </div>
    <div class="invisible fuck" id="it6">
        <img class="item 6 invisible" src="/6_1.png">
        <input class="invisible input" id="ans6" type="text">
    </div>
    <div class="invisible fuck" id="it7">
        <img class="item 7 invisible" src="/7_1.png">
        <input class="invisible input" id="ans7" type="text">
    </div>
    <div class="invisible fuck" id="it8">
        <img class="item 8 invisible" src="/8_1.png">
        <input class="invisible input" id="ans8" type="text">
    </div>
    <div class="invisible fuck" id="it9">
        <img class="item 9 invisible" src="/9_1.png">
        <input class="invisible input" id="ans9" type="text">
    </div>
</div>
<button class="invisible start" id="poop" onclick="realTest()" >Start actual test</button>
<h1 class="invisible breh">You made a mistake!</h1>
<h1 id="scoreDisplay"></h1>
<h1 id="ssDisplay"></h1>
<h1 id="timerDisplay"  class="invisible"></h1>
</div>
<script>
    function startPrac() {
    var inputans1 = document.getElementById('ans1');
    var inputans2 = document.getElementById('ans2');
    var inputans3 = document.getElementById('ans3');
    var inputans6 = document.getElementById('ans6');
    var inputans5 = document.getElementById('ans5');
    
    inputans1.value = "1";
    inputans2.value = "2";
    inputans3.value = "3";
    inputans6.value = "6";
    inputans5.value = "5";
}
function realShit() {
    const none = document.querySelectorAll('.real');
    const shitass = document.getElementById('workpls')

    none.forEach(element => {
        element.classList.add('invisible');
    });

    shitass.classList.add('invisible')
   
    shitass.classList('boxes')
}

document.getElementById('poop').addEventListener('click', realShit);

        document.getElementById("practice").addEventListener("click", startPrac);
        const correctValues = {
            'ans1': '1',
            'ans2': '2',
            'ans3': '3',
            'ans4': '4',
            'ans5': '5',
            'ans6': '6',
            'ans7': '7',
            'ans8': '8',
            'ans9': '9'
        };

       
    

        function validateInput(event) {
            const input = event.target;
            const inputId = input.id;
            const value = input.value;

            if (correctValues[inputId] !== value) {
                showError();
            } 
        }

        function showError() {
  const mistake = document.querySelector('.breh');
  if (mistake) {
    mistake.classList.remove('invisible');
    mistake.classList.remove('fade-out');
    void mistake.offsetWidth;
    setTimeout(() => {
      mistake.classList.add('fade-out');
    }, 100);
  }
}


       
document.addEventListener('DOMContentLoaded', function() {
            function enableInput() {
                const input1 = document.getElementById('ans7');
                if (input1) {
                    input1.disabled = false;
                    input1.focus();
                } 
            }

            document.getElementById('practice').addEventListener('click', enableInput);
        });
        function setupEventListeners() {
            const inputIds = Object.keys(correctValues);
            inputIds.forEach(id => {
                const inputElement = document.getElementById(id);
                if (inputElement) {
                    inputElement.addEventListener('input', validateInput);
                    inputElement.addEventListener('keydown', handleEnterKey);
                }
            });
        }

        function removeEventListeners() {
            const inputIds = Object.keys(correctValues);
            inputIds.forEach(id => {
                const inputElement = document.getElementById(id);
                if (inputElement) {
                    inputElement.removeEventListener('input', validateInput);
                    inputElement.removeEventListener('keydown', handleEnterKey);
                    inputElement.addEventListener('keydown',realTestEnterKeys )
                }
            });
        }

        function handleEnterKey() {
            if (event.key === 'Enter') {
                event.preventDefault();
                const inputs = ['ans3', 'ans2', 'ans1', 'ans5', 'ans6', 'ans7', 'ans4', 'ans8', 'ans9'];
                const currentIndex = inputs.indexOf(event.target.id);

                if (currentIndex >= 0) {
                    if (currentIndex === 8) {
                        generateButton();
                    }

                    if (currentIndex < inputs.length - 1) {
                        document.getElementById(inputs[currentIndex + 1]).focus();
                    }
                }
            }
            else if (event.key === 'Backspace' && event.target.value === '') {
                    var inputs = ['ans3', 'ans2', 'ans1', 'ans5', 'ans6', 'ans7', 'ans4', 'ans8', 'ans9'];
                const currentIndex = inputs.indexOf(event.target.id);

        if (currentIndex > 0) {
            document.getElementById(inputs[currentIndex - 1]).focus();
        }
            
        
        }
    }

        function generateButton() {
            const btn = document.querySelector('.start');
            btn.classList.remove('invisible');
        }

        function reorderItems() {
            const container = document.getElementById('array');
            const newOrder = ['it3', 'it2', 'it1', 'it5', 'it6', 'it7', 'it4', 'it8', 'it9'];

            newOrder.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    container.appendChild(element);
                }
            });
        }

        function clearInputs() {
            const inputIds = Object.keys(correctValues);
            inputIds.forEach(id => {
                const inputElement = document.getElementById(id);
                if (inputElement) {
                    inputElement.value = "";
                }
            });
        }

        function hideButton() {
            const btn = document.querySelector('.start');
            btn.classList.add('invisible');
        }
        

        let itemArrays=[/*['it1', 'it4', 'it8', 'it2', 'it7', 'it6', 'it9', 'it3', 'it5']*/['it8', 'it3', 'it1', 'it9', 'it2', 'it5', 'it6', 'it4', 'it7'],
        ['it7', 'it2', 'it9', 'it8', 'it1', 'it4', 'it3', 'it5', 'it6'],['it9', 'it1', 'it2', 'it4', 'it7', 'it5', 'it8', 'it3', 'it6'],
        ['it5', 'it8', 'it6', 'it4', 'it3', 'it1', 'it7', 'it2', 'it9'],['it1', 'it3', 'it9', 'it6', 'it7', 'it5', 'it2', 'it4', 'it8'],
        ['it4', 'it2', 'it8', 'it7', 'it3', 'it5', 'it6', 'it1', 'it9'],['it7', 'it6', 'it4', 'it1', 'it3', 'it2', 'it8', 'it5', 'it9'],
        ['it9', 'it2', 'it5', 'it3', 'it4', 'it6', 'it8', 'it1', 'it7'],['it8', 'it1', 'it9', 'it5', 'it4', 'it2', 'it3', 'it7', 'it6'],
        ['it8', 'it7', 'it3', 'it4', 'it6', 'it5', 'it9', 'it1', 'it2'],['it3', 'it6', 'it8', 'it7', 'it1', 'it9', 'it4', 'it5', 'it2'],
        ['it2', 'it9', 'it1', 'it5', 'it6', 'it3', 'it4', 'it8', 'it7'],['it6', 'it4', 'it1', 'it9', 'it5', 'it8', 'it7', 'it3', 'it2'],
        ['it3', 'it2', 'it7', 'it5', 'it8', 'it4', 'it1', 'it6', 'it9']]
        

        function realTest() {
            clearInputs();
            hideButton();
            removeEventListeners();

            const container = document.getElementById('array');
            const setOne = ['it1', 'it4', 'it8', 'it2', 'it7', 'it6', 'it9', 'it3', 'it5'];
            setOne.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    container.appendChild(element);
                    console.log(setOne)
                }
            });
        }
        let currentArrayIndexx = 0; 
function reOrderRealItems() {
    const container = document.getElementById('array');
    const itemsCurrent = itemArrays[currentArrayIndexx];

    

    itemsCurrent.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            container.appendChild(element);
        }
    });

    console.log(itemsCurrent);
}




        window.onload = function() {
            setupEventListeners();
            // reorderItems();
        };

          let inputArrays = [['ans1', 'ans4', 'ans8', 'ans2', 'ans7', 'ans6', 'ans9', 'ans3', 'ans5'],
          ['ans8', 'ans3', 'ans1', 'ans9', 'ans2', 'ans5', 'ans6', 'ans4', 'ans7'], ['ans7', 'ans2', 'ans9', 'ans8', 'ans1', 'ans4', 'ans3', 'ans5', 'ans6'], 
          ['ans9', 'ans1', 'ans2', 'ans4', 'ans7', 'ans5', 'ans8', 'ans3', 'ans6'], ['ans5', 'ans8', 'ans6', 'ans4', 'ans3', 'ans1', 'ans7', 'ans2', 'ans9'],
          ['ans1', 'ans3', 'ans9', 'ans6', 'ans7', 'ans5', 'ans2', 'ans4', 'ans8'],['ans4', 'ans2', 'ans8', 'ans7', 'ans3', 'ans5', 'ans6', 'ans1', 'ans9'],
          ['ans7', 'ans6', 'ans4', 'ans1', 'ans3', 'ans2', 'ans8', 'ans5', 'ans9'],['ans9', 'ans2', 'ans5', 'ans3', 'ans4', 'ans6', 'ans8', 'ans1', 'ans7'],
          ['ans8', 'ans1', 'ans9', 'ans5', 'ans4', 'ans2', 'ans3', 'ans7', 'ans6'],['ans8', 'ans7', 'ans3', 'ans4', 'ans6', 'ans5', 'ans9', 'ans1', 'ans2'],
          ['ans3', 'ans6', 'ans8', 'ans7', 'ans1', 'ans9', 'ans4', 'ans5', 'ans2'],['ans2', 'ans9', 'ans1', 'ans5', 'ans6', 'ans3', 'ans4', 'ans8', 'ans7'],
          ['ans6', 'ans4', 'ans1', 'ans9', 'ans5', 'ans8', 'ans7', 'ans3', 'ans2'], ['ans3', 'ans2', 'ans7', 'ans5', 'ans8', 'ans4', 'ans1', 'ans6', 'ans9'] ]



          let currentArrayIndex = 0; 
          
          

          function realTestEnterKeys(event) {
    let inputs = inputArrays[currentArrayIndex];
    let currentIndex = inputs.indexOf(event.target.id);

    if (event.key === 'Enter') {
        event.preventDefault();

        if (currentIndex >= 0) {
            if (currentIndex === 8) {
                currentArrayIndexx = currentArrayIndex;
             
               
                reOrderRealItems();
                clearInputs();
                currentArrayIndex = (currentArrayIndex + 1) % inputArrays.length;
                inputs = inputArrays[currentArrayIndex];
                
                const nextElement = document.getElementById(inputs[0]);
                if (nextElement) {
                    nextElement.focus();
                } else {
                    console.error(`Element with ID ${inputs[0]} not found`);
                }
            } else {
                if (currentIndex < inputs.length - 1) {
                    const nextElement = document.getElementById(inputs[currentIndex + 1]);
                    if (nextElement) {
                        nextElement.focus();
                    } else {
                        console.error(`Element with ID ${inputs[currentIndex + 1]} not found`);
                    }
                }
            }
        }
    } else if (event.key === 'Backspace' && event.target.value === '') {
        if (currentIndex > 0) {
            const prevElement = document.getElementById(inputs[currentIndex - 1]);
            if (prevElement) {
                prevElement.focus();
            } else {
                console.error(`Element with ID ${inputs[currentIndex - 1]} not found`);
            }
        }
    }
}

document.addEventListener('DOMContentLoaded', function() {
    function enableInputReal() {
        const input1 = document.getElementById('ans1');
        if (input1) {
            input1.disabled = false;
            input1.focus();
        }
    }

    document.getElementById('poop').addEventListener('click', enableInputReal);
});

const correctValuess = {
    'ans1': '1',
    'ans2': '2',
    'ans3': '3',
    'ans4': '4',
    'ans5': '5',
    'ans6': '6',
    'ans7': '7',
    'ans8': '8',
    'ans9': '9'
};

let score = 0;

function validateInputt(event) {
    if (!isTimerRunning) {
        console.log('Scoring is stopped as the timer has ended.');
        return;
    }
}

function validateInputt(event) {
    const input = event.target;
    const inputId = input.id;
    const value = input.value;

    if (inputId in correctValuess) {
        if (value === correctValuess[inputId]) {
            console.log(`${inputId} is correct`);
            score++;
        } else {
            console.log(`${inputId} is incorrect`);
            score--;
        }
    }

    displayScore();
}

function displayScore() {
    const scoreElement = document.getElementById('scoreDisplay');
    if (scoreElement) {
        scoreElement.textContent = `Score: ${score}`;
    } else {
        console.error('Score element not found');
    }
}

function startValidation() {
    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', validateInputt);
    });
}

document.getElementById('poop').addEventListener('click', startValidation);



let timer;
let secondsRemaining = 120;
let isTimerRunning = false; 
function updateTimerDisplay() {
    const minutes = Math.floor(secondsRemaining / 60);
    const seconds = secondsRemaining % 60;
    const timerDisplay = document.getElementById('timerDisplay');

    timerDisplay.textContent = `Time: ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
}

function startTimer() {
    const stfu = document.getElementById('timerDisplay');
    stfu.classList.remove('invisible');
    if (timer) {
        clearInterval(timer);
    }
    isTimerRunning = true;
    timer = setInterval(() => {
        if (secondsRemaining > 0) {
            secondsRemaining--;
            updateTimerDisplay();
        } else {
            clearInterval(timer);
            isTimerRunning = false;
            console.log('Timer has ended');
        }
    }, 1000);
}

function stopTimer() {
    clearInterval(timer);
    isTimerRunning = false;
    console.log('Timer stopped');
}

document.getElementById('poop').addEventListener('click', startTimer);

updateTimerDisplay();


function getScaledScore(score) {
    if (score >= 0 && score <= 21) {
        return 1;
    } else if (score >= 23 && score <= 27) {
        return 2;
    }
    else if (score >= 28 && score <= 33) {
        return 3;
    }
    else if (score >= 34 && score <= 39) {
        return 4;
    }else if (score >= 40 && score <= 46) {
        return 5;
    }else if (score >= 47 && score <= 52) {
        return 6;
    }
    else if (score >= 53 && score <= 58) {
        return 7;
    }else if (score >= 59 && score <= 64) {
        return 8;
    }else if (score >= 65 && score <= 70) {
        return 9;
    }else if (score >= 71 && score <= 75) {
        return 10;
    }else if (score >= 76 && score <= 80) {
        return 11;
    }else if (score >= 81 && score <= 86) {
        return 12;
    }else if (score >= 87 && score <= 91) {
        return 13;
    }else if (score >= 92 && score <= 95) {
        return 14;
    }else if (score >= 96 && score <= 10) {
        return 15;
    }
    else if (score >= 101 && score <= 104) {
        return 16;
    }
    else if (score >= 105 && score <= 107) {
        return 17;
    }
    else if (score >= 108 && score <= 110) {
        return 18;
    }
    else if (score >= 111 && score <= 135) {
        return 19;
    }
}

function displayScaledScore() {
    const sS = getScaledScore(score);
    const sSElement = document.getElementById('ssDisplay');
    if (sSElement) {
        sSElement.textContent = `Scaled Score: ${sS}`;
    } else {
        console.error('ssDisplay element not found');
    }
}
 
displayScaledScore();

document.querySelectorAll('input').forEach(input => {
    input.setAttribute('autocomplete', 'off');
});


    </script>
</body>
</html>